import React, { useState } from 'react';
import { Card, CardHeader, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Alert, AlertDescription } from '@/components/ui/alert';

const MoodGame = () => {
  const scenarios = [
    {
      id: 1,
      description: "×“× ×™, ×ª×œ××™×“ ×›×™×ª×” ×”', × ×›× ×¡ ×œ×›×™×ª×” ×××•×—×¨ ×”×™×•×. ×”×•× × ×¨××” ×¢×™×™×£ ×‘××™×•×—×“, ×©×¢×¨×• ××‘×•×œ×’×Ÿ, ×•×‘×’×“×™×• ××¨×•×©×œ×™×. ×‘××”×œ×š ×”×©×™×¢×•×¨ ×”×¨××©×•×Ÿ ×”×•× × ×¨×“× ×¢×œ ×”×©×•×œ×—×Ÿ, ×•×›×©×”×¢×™×¨×• ××•×ª×•, ×”×ª×¤×¨×¥ ×‘×‘×›×™. ×›×©× ×™×¡×™×ª ×œ×©×•×—×— ××™×ª×•, ×”×•× ×¡×™×¨×‘ ×œ×¡×¤×¨ ××” ×§×¨×” ×•×¨×§ ×××¨ ×©×”×•× ×œ× ×™×©×Ÿ ×›×œ ×”×œ×™×œ×”.",
      mood: "××¦×•×§×”",
      signs: ["×¢×™×™×¤×•×ª ×§×™×¦×•× ×™×ª", "×”×–× ×—×” ×¢×¦××™×ª", "×”×ª×¤×¨×¦×•×ª ×¨×’×©×™×ª"],
      recommendations: ["×©×™×—×” ×¤×¨×˜×™×ª ×¨×’×™×©×”", "×™×¦×™×¨×ª ×§×©×¨ ×¢× ×”×”×•×¨×™×", "×”×¤× ×™×” ×œ×™×•×¢×¦×ª"]
    },
    {
      id: 2,
      description: "××™×›×œ, ×ª×œ××™×“×” ××¦×˜×™×™× ×ª, ×”×—×œ×” ×œ××—×¨×•× ×” ×œ×”×¨××•×ª ×©×™× ×•×™ ×§×™×¦×•× ×™ ×‘×”×ª× ×”×’×•×ª×”. ×”×™× ××¡×¨×‘×ª ×œ×”×©×ª×ª×£ ×‘×“×™×•× ×™× ×›×™×ª×ª×™×™×, ×œ××¨×•×ª ×©×‘×¢×‘×¨ ×”×™×™×ª×” ×¤×¢×™×œ×” ×××•×“. ×‘×”×¤×¡×§×•×ª ×”×™× ×™×•×©×‘×ª ×œ×‘×“, ××ª×¢×œ××ª ××—×‘×¨×•×ª×™×” ×”×˜×•×‘×•×ª, ×•×‘××‘×—×Ÿ ×”××—×¨×•×Ÿ ×§×™×‘×œ×” ×¦×™×•×Ÿ × ××•×š ×‘××•×¤×Ÿ ×—×¨×™×’.",
      mood: "×“×™×›××•×Ÿ",
      signs: ["×™×¨×™×“×” ×‘×”×™×©×’×™×", "×”×ª×‘×•×“×“×•×ª ×—×‘×¨×ª×™×ª", "×©×™× ×•×™ ×”×ª× ×”×’×•×ª×™ ×§×™×¦×•× ×™"],
      recommendations: ["×©×™×—×” ×¢× ×”×™×•×¢×¦×ª", "××¢×§×‘ ××—×¨ ×”×ª× ×”×’×•×ª", "×ª××™×›×” ×œ×™××•×“×™×ª"]
    },
    {
      id: 3,
      description: "×™×•×¡×™ ××’×™×¢ ×œ×‘×™×ª ×”×¡×¤×¨ ×¢× ×—×™×•×š ×¢× ×§ ×•×× ×¨×’×™×” ××ª×¤×¨×¦×ª. ×”×•× ×¨×¥ ×‘××¡×“×¨×•× ×•×ª, ××—×‘×§ ××ª ×›×œ ××™ ×©×”×•× ×¨×•××”, ×•××¡×¤×¨ ×‘×”×ª×œ×”×‘×•×ª ×¢×œ ×ª×•×›× ×™×•×ª ×”×§×™×¥ ×©×œ×•. ×‘×›×™×ª×” ×”×•× ×§×•×¤×¥ ×××§×•××• ×›×œ ×›××” ×“×§×•×ª, ××ª× ×“×‘ ×œ×›×œ ××©×™××”, ×•××“×‘×¨ ×‘××”×™×¨×•×ª ×•×‘×§×•×œ ×¨× ××”×¨×’×™×œ.",
      mood: "×”×ª×¨×’×©×•×ª ×™×ª×¨",
      signs: ["×× ×¨×’×™×” ××•×’×‘×¨×ª", "×“×™×‘×•×¨ ××”×™×¨", "×”×ª× ×”×’×•×ª ××™××¤×•×œ×¡×™×‘×™×ª"],
      recommendations: ["×”×›×•×•× ×” ×œ×¤×¢×™×œ×•×ª ×××•×§×“×ª", "××ª×Ÿ ×ª×¤×§×™×“ ××—×¨××™", "××™×–×•×Ÿ ×”×¤×¢×™×œ×•×ª"]
    },
    {
      id: 4,
      description: "×¨×•×ª×™, ×ª×œ××™×“×ª ×›×™×ª×” ×•', ××’×™×¢×” ×œ×‘×™×ª ×”×¡×¤×¨ ×•××¡×¨×‘×ª ×œ×”×™×›× ×¡ ×œ×›×™×ª×”. ×”×™× × ×¦××“×ª ×œ×§×™×¨ ×‘××¡×“×¨×•×Ÿ, × ×•×©××ª ×‘×›×‘×“×•×ª, ×™×“×™×” ×¨×•×¢×“×•×ª ×•×”×™× ××•××¨×ª ×©×”×™× ××¤×—×“×ª ×œ×”×™×›× ×¡ ×›×™ ×™×© ×œ×” ×”×™×•× ×”×¨×¦××” ××•×œ ×”×›×™×ª×”. ×”×™× ××ª×—×™×œ×” ×œ×‘×›×•×ª ×•××ª×œ×•× × ×ª ×¢×œ ×›××‘ ×‘×˜×Ÿ.",
      mood: "×—×¨×“×”",
      signs: ["×ª×’×•×‘×” ×¤×™×–×™×•×œ×•×’×™×ª", "×”×™×× ×¢×•×ª", "××—×©×‘×•×ª ×©×œ×™×œ×™×•×ª"],
      recommendations: ["×˜×›× ×™×§×•×ª × ×©×™××” ×•×”×¨×’×¢×”", "×‘× ×™×™×ª ×‘×™×˜×—×•×Ÿ ×”×“×¨×’×ª×™", "×œ×™×•×•×™ ××™×©×™"]
    },
    {
      id: 5,
      description: "×××™×¨ ×—×•×–×¨ ××”×”×¤×¡×§×” ×›×•×¢×¡ ×××•×“. ×”×•× ×˜×•×¨×§ ××ª ×”×“×œ×ª, ×–×•×¨×§ ××ª ×”×ª×™×§ ×¢×œ ×”×¨×¦×¤×” ×•×¦×•×¢×§ ×¢×œ ×—×‘×¨×™×• ×œ×›×™×ª×”. ×›×©×× ×¡×™× ×œ×‘×¨×¨ ××” ×§×¨×”, ×”×•× ××¡×¤×¨ ×‘×›×¢×¡ ×©×™×œ×“×™× ××›×™×ª×” ××—×¨×ª ×œ×§×—×• ×œ×• ××ª ×”×›×“×•×¨ ×•×œ× ×”×¡×›×™××• ×œ×”×—×–×™×¨. ×”×•× ×××™×™× ×©×™×—×–×™×¨ ×œ×”× ×‘×”×¤×¡×§×” ×”×‘××”.",
      mood: "×›×¢×¡",
      signs: ["××œ×™××•×ª ×¤×™×–×™×ª ×›×œ×¤×™ ×—×¤×¦×™×", "×¦×¢×§×•×ª", "××™×•××™×"],
      recommendations: ["×”×¨×’×¢×” ××™×™×“×™×ª", "×ª×™×•×•×š ×‘×™×Ÿ ×”×¦×“×“×™×", "×œ×™××•×“ ×¤×ª×¨×•×Ÿ ×§×•× ×¤×œ×™×§×˜×™×"]
    }
  ];

  const [currentScenario, setCurrentScenario] = useState(0);
  const [showAnswer, setShowAnswer] = useState(false);
  const [score, setScore] = useState(0);
  const [gameOver, setGameOver] = useState(false);
  const [selectedMood, setSelectedMood] = useState("");

  const moodOptions = ["××¦×•×§×”", "×“×™×›××•×Ÿ", "×”×ª×¨×’×©×•×ª ×™×ª×¨", "×—×¨×“×”", "×›×¢×¡", "×©××—×”"];

  const handleAnswer = (mood) => {
    setSelectedMood(mood);
    setShowAnswer(true);
    if (mood === scenarios[currentScenario].mood) {
      setScore(score + 20);
    }
  };

  const getEmoji = (finalScore) => {
    if (finalScore >= 80) return "ğŸ¤©";
    if (finalScore >= 60) return "ğŸ˜Š";
    if (finalScore >= 40) return "ğŸ˜• ğŸ’ª";
    return "ğŸ˜¢ âœ¨";
  };

  const getFeedback = (finalScore) => {
    if (finalScore === 100) return "×•×•××•! ×ª×•×¦××” ××•×©×œ××ª! ××ª/×” ××•××—×”/×™×ª ×‘×–×™×”×•×™ ××¦×‘×™ ×¨×•×—!";
    if (finalScore >= 80) return "×›×œ ×”×›×‘×•×“! ×ª×•×¦××” ××¦×•×™× ×ª!";
    if (finalScore >= 60) return "×™×¤×” ×××•×“! ×”××©×š/×™ ×›×š!";
    if (finalScore >= 40) return "×™×© ×œ×š ×¤×•×˜× ×¦×™××œ! ×¢× ×¢×•×“ ×§×¦×ª ×ª×¨×’×•×œ ×ª×¦×œ×™×—/×™ ×™×•×ª×¨!";
    return "××œ ×“××’×”! ×¢× ×§×¦×ª ×ª×¨×’×•×œ × ×•×¡×£ ×ª×©×ª×¤×¨/×™ ×‘×•×•×“××•×ª!";
  };

  const nextScenario = () => {
    if (currentScenario < scenarios.length - 1) {
      setCurrentScenario(currentScenario + 1);
      setShowAnswer(false);
      setSelectedMood("");
    } else {
      setGameOver(true);
    }
  };

  const restartGame = () => {
    setCurrentScenario(0);
    setShowAnswer(false);
    setScore(0);
    setGameOver(false);
    setSelectedMood("");
  };

  if (gameOver) {
    return (
      <Card className="w-full max-w-2xl mx-auto p-6">
        <CardContent className="text-center space-y-8">
          <div className="text-9xl mb-8">
            {getEmoji(score)}
          </div>
          <div className="space-y-4">
            <h1 className="text-4xl font-bold mb-4">
              ×”×¦×™×•×Ÿ ×”×¡×•×¤×™ ×©×œ×š:
            </h1>
            <p className="text-6xl font-bold text-primary mb-4">
              {score}
            </p>
            <p className="text-xl text-gray-600 mb-8">
              {getFeedback(score)}
            </p>
            <Button onClick={restartGame} className="text-lg px-8 py-4">
              ×©×—×§ ×©×•×‘
            </Button>
          </div>
        </CardContent>
      </Card>
    );
  }

  return (
    <Card className="w-full max-w-2xl mx-auto">
      <CardHeader className="text-center">
        <h2 className="text-2xl font-bold">×–×™×”×•×™ ××¦×‘×™ ×¨×•×— ×©×œ ×ª×œ××™×“×™×</h2>
        <p className="text-gray-500">×ª×¨×—×™×© {currentScenario + 1} ××ª×•×š {scenarios.length}</p>
        <p className="text-gray-500">× ×™×§×•×“: {score}</p>
      </CardHeader>
      <CardContent className="space-y-6">
        <div className="bg-gray-50 p-6 rounded-lg">
          <p className="text-lg leading-relaxed">{scenarios[currentScenario].description}</p>
        </div>

        <div className="grid grid-cols-2 gap-3 md:grid-cols-3">
          {moodOptions.map((mood) => (
            <Button
              key={mood}
              onClick={() => handleAnswer(mood)}
              disabled={showAnswer}
              variant={selectedMood === mood ? "secondary" : "outline"}
              className="w-full py-4"
            >
              {mood}
            </Button>
          ))}
        </div>

        {showAnswer && (
          <div className="space-y-4">
            <Alert variant={selectedMood === scenarios[currentScenario].mood ? "success" : "error"}>
              <AlertDescription className="text-lg">
                {selectedMood === scenarios[currentScenario].mood 
                  ? "×›×œ ×”×›×‘×•×“! ×–×™×”×™×ª × ×›×•×Ÿ ××ª ××¦×‘ ×”×¨×•×—."
                  : `×”×ª×©×•×‘×” ×”× ×›×•× ×” ×”×™×: ${scenarios[currentScenario].mood}`}
              </AlertDescription>
            </Alert>

            <div className="bg-gray-50 p-4 rounded-lg space-y-2">
              <h3 className="font-bold text-lg">×¡×™×× ×™× ×œ×–×™×”×•×™:</h3>
              <ul className="list-disc list-inside">
                {scenarios[currentScenario].signs.map((sign, index) => (
                  <li key={index} className="text-lg">{sign}</li>
                ))}
              </ul>
            </div>

            <div className="bg-gray-50 p-4 rounded-lg space-y-2">
              <h3 className="font-bold text-lg">×”××œ×¦×•×ª ×œ×˜×™×¤×•×œ:</h3>
              <ul className="list-disc list-inside">
                {scenarios[currentScenario].recommendations.map((rec, index) => (
                  <li key={index} className="text-lg">{rec}</li>
                ))}
              </ul>
            </div>

            <Button onClick={nextScenario} className="w-full py-4 text-lg">
              {currentScenario < scenarios.length - 1 ? "×”××©×š ×œ×ª×¨×—×™×© ×”×‘×" : "×¡×™×™× ××©×—×§"}
            </Button>
          </div>
        )}
      </CardContent>
    </Card>
  );
};

export default MoodGame;
